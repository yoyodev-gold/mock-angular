<main class="create-main">
  <div class="create-container">
    <div class="create-title"> Invoice #{{(invoicesList$ | async)[(invoicesList$ | async).length -1]?.id + 1}}</div>
    <form [formGroup]="createInvoiceForm" (ngSubmit)="onSubmit()">

      <div class="create-name">
        <mat-select placeholder="Select name" formControlName="customer_id">
          <mat-option *ngFor="let customer of customersList$ | async" [value]="customer.id">
            {{ customer.name }}
          </mat-option>
        </mat-select>
      </div>
      <div class="create-wrapper">
        <div class="create-products" formArrayName="items">
          <div class="create-products__row" *ngFor="let itemsGroup of createInvoiceArray.controls; let i = index">
            <div class="create-products__info" [formGroupName]="i">
              <div class="create-products__column create-products__column_select">
                <div class="create-products__title">Products</div>
                <mat-select class="create-products__select" placeholder="Select product" formControlName="product_id">
                  <mat-option *ngFor="let product of productsList$ | async" [value]="product.id">
                    {{ product.name }}
                  </mat-option>
                </mat-select>
              </div>
              <div class="create-products__column">
                <div class="create-products__title">Quantity</div>
                <input class="create-products__input" appOnlyNumbers formControlName="quantity" type="text">
              </div>
              <div class="create-products__column">
                <div class="create-products__title">Price</div>
                  <input class="create-products__input" readonly appOnlyNumbers formControlName="price" type="text">
                  <!--{{createInvoicePriceControl.value || 0 | currency}}-->
              </div>
            </div>
          </div>
        </div>

        <div class="create-discount">
          <div class="create-discount__title">Discount %</div>
          <input class="create-discount__percent" appOnlyNumbers formControlName="discount" type="text">
        </div>
      </div>

      <div class="create-string"></div>

      <div class="create-total">
        <div class="create-total__title">TOTAL</div>
        <div class="create-total__amount">{{createInvoiceTotalControl.value || 0 | currency}}
        </div>
      </div>
      <button class="create-submit" type="submit" [disabled]="createInvoiceForm.invalid">Save</button>
    </form>
  </div>
</main>